/*
 * Copyright (c) &amp;#36;today.year, House365. All rights reserved.
 */
buildscript {
    repositories {
        maven {
            url "http://192.168.108.60/nexus/content/groups/public/"
        }
        jcenter()
    }
    dependencies {
        classpath 'com.house365.build:android-csv-variants:1.0.3'
//        classpath 'com.house365.build:android-shade-plugin:1.5.0'
    }
}

apply plugin: 'com.android.library'
apply from: '../maven.gradle'
apply plugin: 'shade'



android {
    compileSdkVersion 23
    buildToolsVersion "23.0.0"

    defaultConfig {
        minSdkVersion 10
        targetSdkVersion 23
        versionCode java.lang.Integer.parseInt(project.publish_version_code)
        versionName project.publish_version
        ndk {
            moduleName = "hello-jni"                        //生成的so名字
            abiFilters "armeabi", "armeabi-v7a", "x86"      //输出指定三种abi体系结构下的so库。目前可有可无。
        }
    }
    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    packagingOptions {
        exclude 'META-INF/DEPENDENCIES'
        exclude 'META-INF/LICENSE'
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/license.txt'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/NOTICE.txt'
        exclude 'META-INF/notice.txt'
        exclude 'META-INF/ASL2.0'
        exclude 'META-INF/maven/com.google.guava/guava/pom.properties'
        exclude 'META-INF/maven/com.google.guava/guava/pom.xml'
    }

    splits {
        abi {
            enable false
            reset()
            include 'x86', 'armeabi-v7a'
            universalApk true
        }
    }

//    LinkedHashMap<String, LinkedHashMap<String, String>> buildVariants = VariantsUtil.readVariantsFromFile(project)
//
//    /**
//     * 添加Flavor
//     */
//    productFlavors {
//        buildVariants.each { flavorName, keyValueMap ->
//            "$flavorName" {
////                applicationId = keyValueMap.get("applicationId")
////            resValue "string", "app_name2", "Some new value"
////            buildConfigField "boolean", 'analyse_flag', channel.get("analyse_flag").toLowerCase()
////            manifestPlaceholders = [UMENG_CHANNEL_VALUE: channel.get("name")]
//            }
//        }
//    }
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile 'com.google.code.gson:gson:2.4'
    shade 'com.squareup.okhttp:okhttp:2.4.0-RC1'
    shade 'com.house365.lib:zxing-android-embedded:0.0.4'
    shade 'com.tencent.bugly:crashreport:latest.release'
}
